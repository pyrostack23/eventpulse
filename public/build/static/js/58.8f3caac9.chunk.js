"use strict";(self.webpackChunkeventpulse_frontend=self.webpackChunkeventpulse_frontend||[]).push([[58],{7058:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var t=a(9379),n=a(5043),i=a(5475),l=a(4505),r=a(7503),o=a(9722),c=a(579);const d=()=>{const[e,s]=(0,n.useState)("dashboard"),[a,d]=(0,n.useState)([]),[h,m]=(0,n.useState)([]),[u,x]=(0,n.useState)({totalEvents:0,upcomingEvents:0,ongoingEvents:0,completedEvents:0,totalUsers:0,students:0,teachers:0,parents:0,totalRegistrations:0,revenue:0,attendanceRate:0,newUsers:0}),[p,v]=(0,n.useState)(!1),[j,g]=(0,n.useState)(null),[N,b]=(0,n.useState)([]),[f,k]=(0,n.useState)("all"),[y,C]=(0,n.useState)(!1),[w,S]=(0,n.useState)(!1),[L,M]=(0,n.useState)(null),[E,A]=(0,n.useState)(""),[R,D]=(0,n.useState)({title:"",description:"",category:"Sports",startDate:"",endDate:"",location:"",venue:"",capacity:50,requiresRegistration:!0,price:0,isFeatured:!1,tags:""}),[z,W]=(0,n.useState)(null),[F,T]=(0,n.useState)({name:"",email:"",role:"student",grade:"",status:"active"}),[U,B]=(0,n.useState)({platformName:"EventPulse",contactEmail:"admin@eventpulse.com",timezone:"UTC",defaultCapacity:50,autoApproval:!0,emailNotifications:!0,smsNotifications:!1,allowRegistration:!0,maintenanceMode:!1});(0,n.useEffect)(()=>{H()},[]),(0,n.useEffect)(()=>{"events"===e?P():"users"===e&&q()},[e]);const H=async()=>{try{const[e,s]=await Promise.all([l.MT.getAll({limit:1e3}),o.A.get("".concat("https://eventpulse.duckdns.org/api","/auth/users")).catch(()=>({data:{users:[]}}))]),a=e.data.events||[],t=s.data.users||[],n=a.filter(e=>"upcoming"===e.status).length,i=a.filter(e=>"ongoing"===e.status).length,r=a.filter(e=>"completed"===e.status).length,c=t.filter(e=>"student"===e.role).length,d=t.filter(e=>"teacher"===e.role).length,h=t.filter(e=>"parent"===e.role).length,m=a.reduce((e,s)=>e+(s.registeredCount||0),0),u=a.reduce((e,s)=>e+(s.price||0)*(s.registeredCount||0),0),p=a.reduce((e,s)=>e+(s.capacity||0),0),v=p>0?(m/p*100).toFixed(1):0,j=new Date;j.setDate(j.getDate()-30);const g=t.filter(e=>new Date(e.createdAt)>j).length;x({totalEvents:a.length,upcomingEvents:n,ongoingEvents:i,completedEvents:r,totalUsers:t.length,students:c,teachers:d,parents:h,totalRegistrations:m,revenue:u,attendanceRate:v,newUsers:g})}catch(e){console.error("Error loading dashboard data:",e)}},P=async()=>{try{const e=await l.MT.getAll({limit:1e3});d(e.data.events||[])}catch(e){console.error("Error loading events:",e)}},q=async()=>{try{const e=await o.A.get("".concat("https://eventpulse.duckdns.org/api","/auth/users"));m(e.data.users||[])}catch(e){console.error("Error loading users:",e),r.oR.error("Failed to load users")}},V=e=>{const{name:s,value:a,type:n,checked:i}=e.target;D((0,t.A)((0,t.A)({},R),{},{[s]:"checkbox"===n?i:a}))},_=e=>{const{name:s,value:a}=e.target;T((0,t.A)((0,t.A)({},F),{},{[s]:a}))},I=()=>{g(null),D({title:"",description:"",category:"Sports",startDate:"",endDate:"",location:"",venue:"",capacity:50,requiresRegistration:!0,price:0,isFeatured:!1,tags:""}),v(!0)},G=async e=>{try{await Promise.all(N.map(s=>l.MT.update(s,{isFeatured:e}))),r.oR.success("".concat(N.length," events updated!")),b([]),P()}catch(s){r.oR.error("Failed to update events")}},O=e=>{const{name:s,value:a,type:n,checked:i}=e.target;B((0,t.A)((0,t.A)({},U),{},{[s]:"checkbox"===n?i:a}))};(0,n.useEffect)(()=>{const e=localStorage.getItem("platformSettings");e&&B(JSON.parse(e))},[]);const J=a.filter(e=>"all"===f||e.category.toLowerCase()===f.toLowerCase()),Q=h.filter(e=>e.name.toLowerCase().includes(E.toLowerCase())||e.email.toLowerCase().includes(E.toLowerCase()));return(0,c.jsxs)("div",{className:"admin-panel",children:[(0,c.jsx)("div",{className:"admin-header",children:(0,c.jsx)("div",{className:"container",children:(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{children:"Admin Control Panel"}),(0,c.jsx)("p",{children:"Manage your entire EventPulse platform"})]}),(0,c.jsx)(i.N_,{to:"/admin/scanner",className:"btn btn-primary",children:"QR Scanner"})]})})}),(0,c.jsxs)("div",{className:"container",children:[(0,c.jsxs)("div",{className:"admin-tabs",children:[(0,c.jsxs)("button",{className:"admin-tab ".concat("dashboard"===e?"active":""),onClick:()=>s("dashboard"),children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Dashboard"]}),(0,c.jsxs)("button",{className:"admin-tab ".concat("events"===e?"active":""),onClick:()=>s("events"),children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Events"]}),(0,c.jsxs)("button",{className:"admin-tab ".concat("users"===e?"active":""),onClick:()=>s("users"),children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Users"]}),(0,c.jsxs)("button",{className:"admin-tab ".concat("settings"===e?"active":""),onClick:()=>s("settings"),children:[(0,c.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:[(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),(0,c.jsxs)(i.N_,{to:"/admin/scanner",className:"admin-tab qr-scanner-tab",children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"QR Scanner"]})]}),"dashboard"===e&&(0,c.jsxs)("div",{className:"admin-content",children:[(0,c.jsx)("div",{className:"content-header",children:(0,c.jsx)("h2",{children:"Dashboard Overview"})}),(0,c.jsxs)("div",{className:"stats-grid",children:[(0,c.jsxs)("div",{className:"stat-card blue",children:[(0,c.jsx)("div",{className:"stat-icon",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,c.jsxs)("div",{className:"stat-content",children:[(0,c.jsx)("h3",{children:u.totalEvents}),(0,c.jsx)("p",{children:"Total Events"}),(0,c.jsxs)("div",{className:"stat-breakdown",children:[(0,c.jsxs)("span",{children:[u.upcomingEvents," upcoming"]}),(0,c.jsxs)("span",{children:[u.ongoingEvents," ongoing"]}),(0,c.jsxs)("span",{children:[u.completedEvents," completed"]})]})]})]}),(0,c.jsxs)("div",{className:"stat-card green",children:[(0,c.jsx)("div",{className:"stat-icon",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,c.jsxs)("div",{className:"stat-content",children:[(0,c.jsx)("h3",{children:u.totalUsers}),(0,c.jsx)("p",{children:"Total Users"}),(0,c.jsxs)("div",{className:"stat-breakdown",children:[(0,c.jsxs)("span",{children:[u.students," students"]}),(0,c.jsxs)("span",{children:[u.teachers," teachers"]}),(0,c.jsxs)("span",{children:[u.parents," parents"]})]})]})]}),(0,c.jsxs)("div",{className:"stat-card purple",children:[(0,c.jsx)("div",{className:"stat-icon",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,c.jsxs)("div",{className:"stat-content",children:[(0,c.jsx)("h3",{children:u.totalRegistrations}),(0,c.jsx)("p",{children:"Total Registrations"}),(0,c.jsx)("div",{className:"stat-breakdown",children:(0,c.jsxs)("span",{children:[u.attendanceRate,"% attendance rate"]})})]})]}),(0,c.jsxs)("div",{className:"stat-card orange",children:[(0,c.jsx)("div",{className:"stat-icon",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,c.jsxs)("div",{className:"stat-content",children:[(0,c.jsxs)("h3",{children:["$",u.revenue.toFixed(2)]}),(0,c.jsx)("p",{children:"Total Revenue"}),(0,c.jsx)("div",{className:"stat-breakdown",children:(0,c.jsx)("span",{children:"From paid events"})})]})]}),(0,c.jsxs)("div",{className:"stat-card pink",children:[(0,c.jsx)("div",{className:"stat-icon",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),(0,c.jsxs)("div",{className:"stat-content",children:[(0,c.jsx)("h3",{children:u.newUsers}),(0,c.jsx)("p",{children:"New Users"}),(0,c.jsx)("div",{className:"stat-breakdown",children:(0,c.jsx)("span",{children:"Last 30 days"})})]})]})]}),(0,c.jsxs)("div",{className:"dashboard-section",children:[(0,c.jsx)("h3",{children:"Quick Actions"}),(0,c.jsxs)("div",{className:"quick-actions",children:[(0,c.jsxs)("button",{className:"action-btn",onClick:()=>{s("events"),I()},children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Event"]}),(0,c.jsxs)("button",{className:"action-btn",onClick:()=>s("users"),children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Manage Users"]}),(0,c.jsxs)("button",{className:"action-btn",onClick:()=>s("events"),children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"View Analytics"]})]})]})]}),"events"===e&&(0,c.jsxs)("div",{className:"admin-content",children:[(0,c.jsxs)("div",{className:"content-header",children:[(0,c.jsx)("h2",{children:"Events Management"}),(0,c.jsxs)("button",{className:"btn btn-primary",onClick:I,children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Event"]})]}),(0,c.jsxs)("div",{className:"table-controls",children:[(0,c.jsxs)("div",{className:"filter-group",children:[(0,c.jsx)("label",{children:"Filter by Category:"}),(0,c.jsxs)("select",{value:f,onChange:e=>k(e.target.value),className:"filter-select",children:[(0,c.jsx)("option",{value:"all",children:"All Categories"}),(0,c.jsx)("option",{value:"sports",children:"Sports"}),(0,c.jsx)("option",{value:"academic",children:"Academic"}),(0,c.jsx)("option",{value:"cultural",children:"Cultural"}),(0,c.jsx)("option",{value:"exhibition",children:"Exhibition"}),(0,c.jsx)("option",{value:"debate",children:"Debate"}),(0,c.jsx)("option",{value:"workshop",children:"Workshop"}),(0,c.jsx)("option",{value:"social",children:"Social"})]})]}),N.length>0&&(0,c.jsxs)("div",{className:"bulk-actions",children:[(0,c.jsxs)("span",{children:[N.length," selected"]}),(0,c.jsx)("button",{className:"btn btn-sm btn-ghost",onClick:()=>G(!0),children:"\u2b50 Feature"}),(0,c.jsx)("button",{className:"btn btn-sm btn-ghost",onClick:()=>G(!1),children:"Remove Feature"}),(0,c.jsx)("button",{className:"btn btn-sm btn-ghost",onClick:async()=>{if(window.confirm("Delete ".concat(N.length," events?")))try{await Promise.all(N.map(e=>l.MT.delete(e))),r.oR.success("".concat(N.length," events deleted!")),b([]),P(),H()}catch(e){r.oR.error("Failed to delete some events")}},style:{color:"var(--error)"},children:"Delete Selected"})]})]}),(0,c.jsx)("div",{className:"events-table",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:(0,c.jsx)("input",{type:"checkbox",checked:N.length===J.length&&J.length>0,onChange:()=>{N.length===J.length?b([]):b(J.map(e=>e._id))}})}),(0,c.jsx)("th",{children:"Title"}),(0,c.jsx)("th",{children:"Category"}),(0,c.jsx)("th",{children:"Date"}),(0,c.jsx)("th",{children:"Capacity"}),(0,c.jsx)("th",{children:"Status"}),(0,c.jsx)("th",{children:"Featured"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:J.map(e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("input",{type:"checkbox",checked:N.includes(e._id),onChange:()=>{return s=e._id,void b(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s}})}),(0,c.jsx)("td",{className:"event-title",children:e.title}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"category-badge",children:e.category})}),(0,c.jsx)("td",{children:new Date(e.startDate).toLocaleDateString()}),(0,c.jsxs)("td",{children:[e.registeredCount," / ",e.capacity]}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"status-badge ".concat(e.status),children:e.status})}),(0,c.jsx)("td",{children:e.isFeatured?"\u2b50":"-"}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{className:"action-buttons",children:[(0,c.jsx)("button",{className:"btn-icon",onClick:()=>(e=>{var s;g(e),D({title:e.title,description:e.description,category:e.category,startDate:new Date(e.startDate).toISOString().slice(0,16),endDate:new Date(e.endDate).toISOString().slice(0,16),location:e.location,venue:e.venue||"",capacity:e.capacity,requiresRegistration:e.requiresRegistration,price:e.price,isFeatured:e.isFeatured,tags:(null===(s=e.tags)||void 0===s?void 0:s.join(", "))||""}),v(!0)})(e),title:"Edit",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"18",height:"18",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,c.jsx)("button",{className:"btn-icon delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this event?"))try{await l.MT.delete(e),r.oR.success("Event deleted successfully!"),P(),H()}catch(s){console.error("Error deleting event:",s),r.oR.error("Failed to delete event")}})(e._id),title:"Delete",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"18",height:"18",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e._id))})]})})]}),"users"===e&&(0,c.jsxs)("div",{className:"admin-content",children:[(0,c.jsxs)("div",{className:"content-header",children:[(0,c.jsx)("h2",{children:"Users Management"}),(0,c.jsx)("input",{type:"text",placeholder:"Search users...",value:E,onChange:e=>A(e.target.value),className:"search-input"})]}),(0,c.jsx)("div",{className:"events-table",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Name"}),(0,c.jsx)("th",{children:"Email"}),(0,c.jsx)("th",{children:"Role"}),(0,c.jsx)("th",{children:"Grade"}),(0,c.jsx)("th",{children:"Status"}),(0,c.jsx)("th",{children:"Joined"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:Q.map(e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"event-title",children:e.name}),(0,c.jsx)("td",{children:e.email}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"category-badge",children:e.role})}),(0,c.jsx)("td",{children:e.grade||"-"}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"status-badge ".concat("active"===e.status?"ongoing":"completed"),children:e.status||"active"})}),(0,c.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{className:"action-buttons",children:[(0,c.jsx)("button",{className:"btn-icon",onClick:()=>(e=>{M(e),T({name:e.name,email:e.email,role:e.role,grade:e.grade||"",status:e.status||"active"}),S(!0)})(e),title:"Edit",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"18",height:"18",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,c.jsx)("button",{className:"btn-icon",onClick:()=>(async(e,s)=>{const a="active"===s?"suspended":"active";try{await o.A.put("".concat("https://eventpulse.duckdns.org/api","/auth/users/").concat(e),{status:a}),r.oR.success("User ".concat(a,"!")),q()}catch(t){r.oR.error("Failed to update user status")}})(e._id,e.status||"active"),title:"active"===e.status?"Suspend":"Activate",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"18",height:"18",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),(0,c.jsx)("button",{className:"btn-icon",onClick:()=>(async e=>{if(window.confirm("Send password reset email to this user?"))try{await o.A.post("".concat("https://eventpulse.duckdns.org/api","/auth/reset-password-admin"),{userId:e}),r.oR.success("Password reset email sent!")}catch(s){r.oR.error("Failed to send reset email")}})(e._id),title:"Reset Password",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"18",height:"18",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),(0,c.jsx)("button",{className:"btn-icon delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user?"))try{await o.A.delete("".concat("https://eventpulse.duckdns.org/api","/auth/users/").concat(e)),r.oR.success("User deleted successfully!"),q(),H()}catch(s){r.oR.error("Failed to delete user")}})(e._id),title:"Delete",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"18",height:"18",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e._id))})]})})]}),"settings"===e&&(0,c.jsxs)("div",{className:"admin-content",children:[(0,c.jsxs)("div",{className:"content-header",children:[(0,c.jsx)("h2",{children:"Platform Settings"}),(0,c.jsxs)("button",{className:"btn btn-primary",onClick:()=>{localStorage.setItem("platformSettings",JSON.stringify(U)),r.oR.success("Settings saved successfully!")},children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Settings"]})]}),(0,c.jsxs)("div",{className:"settings-grid",children:[(0,c.jsxs)("div",{className:"settings-section",children:[(0,c.jsx)("h3",{children:"General Settings"}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Platform Name"}),(0,c.jsx)("input",{type:"text",name:"platformName",value:U.platformName,onChange:O,className:"form-input"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Contact Email"}),(0,c.jsx)("input",{type:"email",name:"contactEmail",value:U.contactEmail,onChange:O,className:"form-input"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Timezone"}),(0,c.jsxs)("select",{name:"timezone",value:U.timezone,onChange:O,className:"form-select",children:[(0,c.jsx)("option",{value:"UTC",children:"UTC"}),(0,c.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,c.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,c.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,c.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"}),(0,c.jsx)("option",{value:"Asia/Colombo",children:"Sri Lanka Time"})]})]})]}),(0,c.jsxs)("div",{className:"settings-section",children:[(0,c.jsx)("h3",{children:"Event Settings"}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Default Event Capacity"}),(0,c.jsx)("input",{type:"number",name:"defaultCapacity",value:U.defaultCapacity,onChange:O,className:"form-input",min:"1"})]}),(0,c.jsxs)("div",{className:"settings-toggle",children:[(0,c.jsxs)("label",{className:"toggle-label",children:[(0,c.jsx)("input",{type:"checkbox",name:"autoApproval",checked:U.autoApproval,onChange:O}),(0,c.jsx)("span",{children:"Auto-approve Registrations"})]}),(0,c.jsx)("p",{className:"toggle-help",children:"Automatically approve event registrations without manual review"})]}),(0,c.jsxs)("div",{className:"settings-toggle",children:[(0,c.jsxs)("label",{className:"toggle-label",children:[(0,c.jsx)("input",{type:"checkbox",name:"allowRegistration",checked:U.allowRegistration,onChange:O}),(0,c.jsx)("span",{children:"Allow User Registration"})]}),(0,c.jsx)("p",{className:"toggle-help",children:"Enable new users to register on the platform"})]})]}),(0,c.jsxs)("div",{className:"settings-section",children:[(0,c.jsx)("h3",{children:"Notification Settings"}),(0,c.jsxs)("div",{className:"settings-toggle",children:[(0,c.jsxs)("label",{className:"toggle-label",children:[(0,c.jsx)("input",{type:"checkbox",name:"emailNotifications",checked:U.emailNotifications,onChange:O}),(0,c.jsx)("span",{children:"Email Notifications"})]}),(0,c.jsx)("p",{className:"toggle-help",children:"Send email notifications for events and updates"})]}),(0,c.jsxs)("div",{className:"settings-toggle",children:[(0,c.jsxs)("label",{className:"toggle-label",children:[(0,c.jsx)("input",{type:"checkbox",name:"smsNotifications",checked:U.smsNotifications,onChange:O}),(0,c.jsx)("span",{children:"SMS Notifications"})]}),(0,c.jsx)("p",{className:"toggle-help",children:"Send SMS notifications for urgent updates"})]})]}),(0,c.jsxs)("div",{className:"settings-section",children:[(0,c.jsx)("h3",{children:"System Settings"}),(0,c.jsxs)("div",{className:"settings-toggle",children:[(0,c.jsxs)("label",{className:"toggle-label",children:[(0,c.jsx)("input",{type:"checkbox",name:"maintenanceMode",checked:U.maintenanceMode,onChange:O}),(0,c.jsx)("span",{children:"Maintenance Mode"})]}),(0,c.jsx)("p",{className:"toggle-help",children:"Enable maintenance mode to restrict access"})]}),(0,c.jsxs)("div",{className:"settings-info",children:[(0,c.jsx)("h4",{children:"System Information"}),(0,c.jsxs)("div",{className:"info-grid",children:[(0,c.jsxs)("div",{className:"info-item",children:[(0,c.jsx)("span",{className:"info-label",children:"Version:"}),(0,c.jsx)("span",{className:"info-value",children:"1.0.0"})]}),(0,c.jsxs)("div",{className:"info-item",children:[(0,c.jsx)("span",{className:"info-label",children:"Environment:"}),(0,c.jsx)("span",{className:"info-value",children:"production"})]}),(0,c.jsxs)("div",{className:"info-item",children:[(0,c.jsx)("span",{className:"info-label",children:"Last Updated:"}),(0,c.jsx)("span",{className:"info-value",children:(new Date).toLocaleDateString()})]})]})]})]})]})]})]}),p&&(0,c.jsx)("div",{className:"modal-overlay",onClick:()=>v(!1),children:(0,c.jsxs)("div",{className:"modal-content large",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h3",{children:j?"Edit Event":"Create New Event"}),(0,c.jsx)("button",{className:"modal-close",onClick:()=>v(!1),children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"24",height:"24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),C(!0);try{const e=(0,t.A)((0,t.A)({},R),{},{tags:R.tags.split(",").map(e=>e.trim()).filter(e=>e)});let n;if(j)await l.MT.update(j._id,e),n=j._id,r.oR.success("Event updated successfully!");else{n=(await l.MT.create(e)).data.event._id,r.oR.success("Event created successfully!")}if(z&&n){console.log("Uploading image for event:",n),console.log("Image file:",z);const e=new FormData;e.append("image",z);try{console.log("Calling uploadImage API...");const s=await l.MT.uploadImage(n,e);console.log("Upload response:",s),r.oR.success("Event image uploaded successfully!")}catch(o){var s,a;console.error("Error uploading image:",o),console.error("Error response:",o.response);const e=(null===(s=o.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||o.message||"Unknown error";r.oR.error("Image upload failed: ".concat(e))}}v(!1),W(null),P(),H()}catch(c){var n,i;console.error("Error saving event:",c);const e=(null===(n=c.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Failed to save event";r.oR.error(e)}finally{C(!1)}},className:"event-form",children:[(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Event Title *"}),(0,c.jsx)("input",{type:"text",name:"title",value:R.title,onChange:V,className:"form-input",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Category *"}),(0,c.jsxs)("select",{name:"category",value:R.category,onChange:V,className:"form-select",required:!0,children:[(0,c.jsx)("option",{value:"Sports",children:"Sports"}),(0,c.jsx)("option",{value:"Academic",children:"Academic"}),(0,c.jsx)("option",{value:"Cultural",children:"Cultural"}),(0,c.jsx)("option",{value:"Exhibition",children:"Exhibition"}),(0,c.jsx)("option",{value:"Debate",children:"Debate"}),(0,c.jsx)("option",{value:"Workshop",children:"Workshop"}),(0,c.jsx)("option",{value:"Social",children:"Social"}),(0,c.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Description *"}),(0,c.jsx)("textarea",{name:"description",value:R.description,onChange:V,className:"form-textarea",rows:"4",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Event Image"}),(0,c.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){if(s.size>5242880)return r.oR.error("Image size must be less than 5MB"),void(e.target.value="");if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.type))return r.oR.error("Only JPG, PNG, GIF, and WebP images are allowed"),void(e.target.value="");W(s)}},className:"form-input"}),(0,c.jsx)("small",{style:{color:"var(--gray-500)",fontSize:"0.875rem"},children:"Upload an image for your event (JPG, PNG, GIF, WebP - Max 5MB)"})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Start Date & Time *"}),(0,c.jsx)("input",{type:"datetime-local",name:"startDate",value:R.startDate,onChange:V,className:"form-input",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"End Date & Time *"}),(0,c.jsx)("input",{type:"datetime-local",name:"endDate",value:R.endDate,onChange:V,className:"form-input",required:!0})]})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Location *"}),(0,c.jsx)("input",{type:"text",name:"location",value:R.location,onChange:V,className:"form-input",placeholder:"e.g., Main Hall",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Venue"}),(0,c.jsx)("input",{type:"text",name:"venue",value:R.venue,onChange:V,className:"form-input",placeholder:"e.g., Building A, Room 101"})]})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Capacity *"}),(0,c.jsx)("input",{type:"number",name:"capacity",value:R.capacity,onChange:V,className:"form-input",min:"1",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Price ($)"}),(0,c.jsx)("input",{type:"number",name:"price",value:R.price,onChange:V,className:"form-input",min:"0",step:"0.01"})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Tags (comma separated)"}),(0,c.jsx)("input",{type:"text",name:"tags",value:R.tags,onChange:V,className:"form-input",placeholder:"e.g., sports, competition, annual"})]}),(0,c.jsxs)("div",{className:"form-checkboxes",children:[(0,c.jsxs)("label",{className:"checkbox-label",children:[(0,c.jsx)("input",{type:"checkbox",name:"requiresRegistration",checked:R.requiresRegistration,onChange:V}),(0,c.jsx)("span",{children:"Requires Registration"})]}),(0,c.jsxs)("label",{className:"checkbox-label",children:[(0,c.jsx)("input",{type:"checkbox",name:"isFeatured",checked:R.isFeatured,onChange:V}),(0,c.jsx)("span",{children:"\u2b50 Featured Event"})]})]}),(0,c.jsxs)("div",{className:"modal-actions",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-ghost",onClick:()=>v(!1),children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:y,children:y?"Saving...":j?"Update Event":"Create Event"})]})]})]})}),w&&(0,c.jsx)("div",{className:"modal-overlay",onClick:()=>S(!1),children:(0,c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h3",{children:"Edit User"}),(0,c.jsx)("button",{className:"modal-close",onClick:()=>S(!1),children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"24",height:"24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),C(!0);try{await o.A.put("".concat("https://eventpulse.duckdns.org/api","/auth/users/").concat(L._id),F),r.oR.success("User updated successfully!"),S(!1),q(),H()}catch(s){console.error("Error updating user:",s),r.oR.error("Failed to update user")}finally{C(!1)}},className:"event-form",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Name *"}),(0,c.jsx)("input",{type:"text",name:"name",value:F.name,onChange:_,className:"form-input",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Email *"}),(0,c.jsx)("input",{type:"email",name:"email",value:F.email,onChange:_,className:"form-input",required:!0})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Role *"}),(0,c.jsxs)("select",{name:"role",value:F.role,onChange:_,className:"form-select",required:!0,children:[(0,c.jsx)("option",{value:"student",children:"Student"}),(0,c.jsx)("option",{value:"teacher",children:"Teacher"}),(0,c.jsx)("option",{value:"admin",children:"Admin"}),(0,c.jsx)("option",{value:"parent",children:"Parent"})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Grade"}),(0,c.jsx)("input",{type:"text",name:"grade",value:F.grade,onChange:_,className:"form-input",placeholder:"e.g., 10"})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Status *"}),(0,c.jsxs)("select",{name:"status",value:F.status,onChange:_,className:"form-select",required:!0,children:[(0,c.jsx)("option",{value:"active",children:"Active"}),(0,c.jsx)("option",{value:"suspended",children:"Suspended"})]})]}),(0,c.jsxs)("div",{className:"modal-actions",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-ghost",onClick:()=>S(!1),children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:y,children:y?"Saving...":"Update User"})]})]})]})})]})}}}]);
//# sourceMappingURL=58.8f3caac9.chunk.js.map
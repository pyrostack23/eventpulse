"use strict";(self.webpackChunkeventpulse_frontend=self.webpackChunkeventpulse_frontend||[]).push([[471],{6471:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var a=t(5043),n=t(4505),i=t(3969),c=t(579);const r=()=>{var e,s,t,r,l,d,o;const[h,v]=(0,a.useState)(null),[m,x]=(0,a.useState)(!0),[j,u]=(0,a.useState)("month"),N=(0,i.Y)();(0,a.useEffect)(()=>{if(g(),N)return N.on("registration:created",g),N.on("event:created",g),N.on("event:updated",g),()=>{N.off("registration:created",g),N.off("event:created",g),N.off("event:updated",g)}},[N,j]);const g=async()=>{try{const e=await n.rh.getDashboard();v(e.data.analytics)}catch(e){console.error("Error loading analytics:",e)}finally{x(!1)}};if(m)return(0,c.jsx)("div",{className:"loading-overlay",children:(0,c.jsx)("div",{className:"spinner"})});if(!h)return null;const k=(null===(e=h.totals)||void 0===e?void 0:e.events)||0,p=(null===(s=h.totals)||void 0===s?void 0:s.registrations)||0,b=(null===(t=h.totals)||void 0===t||t.users,(null===(r=h.eventsByStatus)||void 0===r||null===(l=r.find(e=>"upcoming"===e._id))||void 0===l?void 0:l.count)||0),f=(null===(d=h.eventsByStatus)||void 0===d||null===(o=d.find(e=>"completed"===e._id))||void 0===o?void 0:o.count)||0,y=k>0?Math.round(f/k*100):0,L=(h.eventsByCategory||[]).map(e=>{const s=k>0?Math.round(e.count/k*100):0;return{name:e._id||"Other",count:e.count,percentage:s}}),M=(h.recentEvents||[]).map(e=>({name:e.title,registrations:e.registeredCount||0,attendance:e.attendedCount||0,rate:e.registeredCount>0?Math.round((e.attendedCount||0)/e.registeredCount*100):0})),C=(h.registrationTrends||[]).slice(-6).map(e=>({month:new Date(e._id).toLocaleDateString("en-US",{month:"short"}),events:e.count,registrations:e.count})),w={totalEvents:k,activeEvents:b,totalRegistrations:p,totalAttendance:f,attendanceRate:y,popularCategories:L,recentEvents:M,monthlyTrend:C};return(0,c.jsxs)("div",{className:"analytics-page",children:[(0,c.jsx)("div",{className:"page-header",children:(0,c.jsx)("div",{className:"container",children:(0,c.jsxs)("div",{className:"header-content",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{children:"Analytics Dashboard"}),(0,c.jsx)("p",{children:"Comprehensive insights and event statistics"})]}),(0,c.jsxs)("div",{className:"time-range-selector",children:[(0,c.jsx)("button",{className:"range-btn ".concat("week"===j?"active":""),onClick:()=>u("week"),children:"Week"}),(0,c.jsx)("button",{className:"range-btn ".concat("month"===j?"active":""),onClick:()=>u("month"),children:"Month"}),(0,c.jsx)("button",{className:"range-btn ".concat("year"===j?"active":""),onClick:()=>u("year"),children:"Year"})]})]})})}),(0,c.jsxs)("div",{className:"container",children:[(0,c.jsxs)("div",{className:"metrics-grid",children:[(0,c.jsxs)("div",{className:"metric-card purple",children:[(0,c.jsx)("div",{className:"metric-icon",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,c.jsxs)("div",{className:"metric-content",children:[(0,c.jsx)("div",{className:"metric-value",children:w.totalEvents}),(0,c.jsx)("div",{className:"metric-label",children:"Total Events"}),(0,c.jsx)("div",{className:"metric-change positive",children:"+12% from last month"})]})]}),(0,c.jsxs)("div",{className:"metric-card blue",children:[(0,c.jsx)("div",{className:"metric-icon",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,c.jsxs)("div",{className:"metric-content",children:[(0,c.jsx)("div",{className:"metric-value",children:w.totalRegistrations.toLocaleString()}),(0,c.jsx)("div",{className:"metric-label",children:"Total Registrations"}),(0,c.jsx)("div",{className:"metric-change positive",children:"+8% from last month"})]})]}),(0,c.jsxs)("div",{className:"metric-card green",children:[(0,c.jsx)("div",{className:"metric-icon",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,c.jsxs)("div",{className:"metric-content",children:[(0,c.jsx)("div",{className:"metric-value",children:w.totalAttendance.toLocaleString()}),(0,c.jsx)("div",{className:"metric-label",children:"Total Attendance"}),(0,c.jsx)("div",{className:"metric-change positive",children:"+5% from last month"})]})]}),(0,c.jsxs)("div",{className:"metric-card orange",children:[(0,c.jsx)("div",{className:"metric-icon",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,c.jsxs)("div",{className:"metric-content",children:[(0,c.jsxs)("div",{className:"metric-value",children:[w.attendanceRate,"%"]}),(0,c.jsx)("div",{className:"metric-label",children:"Attendance Rate"}),(0,c.jsx)("div",{className:"metric-change positive",children:"+2% from last month"})]})]})]}),(0,c.jsxs)("div",{className:"charts-grid",children:[(0,c.jsxs)("div",{className:"chart-card",children:[(0,c.jsxs)("div",{className:"chart-header",children:[(0,c.jsx)("h3",{children:"Event Categories"}),(0,c.jsxs)("button",{className:"btn btn-sm btn-ghost",children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"18",height:"18",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]})]}),(0,c.jsx)("div",{className:"category-chart",children:w.popularCategories.map((e,s)=>(0,c.jsxs)("div",{className:"category-bar",children:[(0,c.jsxs)("div",{className:"category-info",children:[(0,c.jsx)("span",{className:"category-name",children:e.name}),(0,c.jsxs)("span",{className:"category-count",children:[e.count," events"]})]}),(0,c.jsx)("div",{className:"bar-container",children:(0,c.jsx)("div",{className:"bar-fill",style:{width:"".concat(e.percentage,"%"),background:"hsl(".concat(60*s,", 70%, 60%)")}})}),(0,c.jsxs)("span",{className:"category-percentage",children:[e.percentage,"%"]})]},s))})]}),(0,c.jsxs)("div",{className:"chart-card",children:[(0,c.jsxs)("div",{className:"chart-header",children:[(0,c.jsx)("h3",{children:"Monthly Trend"}),(0,c.jsxs)("button",{className:"btn btn-sm btn-ghost",children:[(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"18",height:"18",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]})]}),(0,c.jsx)("div",{className:"trend-chart",children:w.monthlyTrend.map((e,s)=>(0,c.jsxs)("div",{className:"trend-bar",children:[(0,c.jsx)("div",{className:"trend-value",children:e.registrations}),(0,c.jsx)("div",{className:"trend-column",style:{height:"".concat(e.registrations/400*100,"%")}}),(0,c.jsx)("div",{className:"trend-label",children:e.month})]},s))})]})]}),(0,c.jsxs)("div",{className:"performance-card",children:[(0,c.jsxs)("div",{className:"chart-header",children:[(0,c.jsx)("h3",{children:"Recent Events Performance"}),(0,c.jsx)("button",{className:"btn btn-sm btn-primary",children:"View All Events"})]}),(0,c.jsx)("div",{className:"performance-table",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Event Name"}),(0,c.jsx)("th",{children:"Registrations"}),(0,c.jsx)("th",{children:"Attendance"}),(0,c.jsx)("th",{children:"Rate"}),(0,c.jsx)("th",{children:"Status"})]})}),(0,c.jsx)("tbody",{children:w.recentEvents.map((e,s)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"event-name",children:e.name}),(0,c.jsx)("td",{children:e.registrations}),(0,c.jsx)("td",{children:e.attendance}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{className:"rate-cell",children:[(0,c.jsx)("div",{className:"rate-bar",children:(0,c.jsx)("div",{className:"rate-fill",style:{width:"".concat(e.rate,"%")}})}),(0,c.jsxs)("span",{children:[e.rate,"%"]})]})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"badge ".concat(e.rate>=95?"badge-success":e.rate>=90?"badge-info":"badge-warning"),children:e.rate>=95?"Excellent":e.rate>=90?"Good":"Average"})})]},s))})]})})]}),(0,c.jsxs)("div",{className:"quick-stats-grid",children:[(0,c.jsxs)("div",{className:"quick-stat-card",children:[(0,c.jsx)("div",{className:"quick-stat-icon purple",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,c.jsxs)("div",{className:"quick-stat-content",children:[(0,c.jsx)("div",{className:"quick-stat-value",children:"12"}),(0,c.jsx)("div",{className:"quick-stat-label",children:"Active Events"})]})]}),(0,c.jsxs)("div",{className:"quick-stat-card",children:[(0,c.jsx)("div",{className:"quick-stat-icon blue",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,c.jsxs)("div",{className:"quick-stat-content",children:[(0,c.jsx)("div",{className:"quick-stat-value",children:"2,847"}),(0,c.jsx)("div",{className:"quick-stat-label",children:"Active Users"})]})]}),(0,c.jsxs)("div",{className:"quick-stat-card",children:[(0,c.jsx)("div",{className:"quick-stat-icon green",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})}),(0,c.jsxs)("div",{className:"quick-stat-content",children:[(0,c.jsx)("div",{className:"quick-stat-value",children:"456"}),(0,c.jsx)("div",{className:"quick-stat-label",children:"Badges Earned"})]})]}),(0,c.jsxs)("div",{className:"quick-stat-card",children:[(0,c.jsx)("div",{className:"quick-stat-icon orange",children:(0,c.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),(0,c.jsxs)("div",{className:"quick-stat-content",children:[(0,c.jsx)("div",{className:"quick-stat-value",children:"98%"}),(0,c.jsx)("div",{className:"quick-stat-label",children:"Satisfaction"})]})]})]})]})]})}}}]);
//# sourceMappingURL=471.a612a39c.chunk.js.map
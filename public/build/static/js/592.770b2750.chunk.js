"use strict";(self.webpackChunkeventpulse_frontend=self.webpackChunkeventpulse_frontend||[]).push([[592],{4690:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(9379),l=s(5043),n=s(4505),r=s(8021),i=s(3745),o=s(579);const c=e=>{let{icon:t="\ud83d\udced",title:s="No data found",message:a="Try adjusting your filters or search criteria",action:l,actionLabel:n="Clear Filters"}=e;return(0,o.jsxs)("div",{className:"empty-state",children:[(0,o.jsx)("div",{className:"empty-state-icon",children:t}),(0,o.jsx)("h3",{className:"empty-state-title",children:s}),(0,o.jsx)("p",{className:"empty-state-message",children:a}),l&&(0,o.jsx)("button",{className:"btn btn-primary",onClick:l,children:n})]})},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[s,a]=(0,l.useState)(e);return(0,l.useEffect)(()=>{const s=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(s)}},[e,t]),s},u=e=>{let{items:t=[],itemHeight:s=100,containerHeight:a=600,renderItem:n,overscan:r=3,className:i=""}=e;const[c,d]=(0,l.useState)(0),u=(0,l.useRef)(null),h=Math.max(0,Math.floor(c/s)-r),m=Math.min(t.length-1,Math.ceil((c+a)/s)+r),v=t.slice(h,m+1),g=t.length*s,p=h*s,f=(0,l.useCallback)(()=>{u.current&&requestAnimationFrame(()=>{d(u.current.scrollTop)})},[]);return(0,l.useEffect)(()=>{const e=u.current;if(e)return e.addEventListener("scroll",f,{passive:!0}),()=>e.removeEventListener("scroll",f)},[f]),(0,o.jsx)("div",{ref:u,className:"virtual-list ".concat(i),style:{height:a,overflow:"auto",position:"relative",willChange:"scroll-position"},children:(0,o.jsx)("div",{style:{height:g,position:"relative"},children:(0,o.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,transform:"translateY(".concat(p,"px)"),willChange:"transform"},children:v.map((e,t)=>(0,o.jsx)("div",{style:{height:s,overflow:"hidden"},children:n(e,h+t)},h+t))})})})},h=()=>{const[e,t]=(0,l.useState)([]),[s,h]=(0,l.useState)(!0),[m,v]=(0,l.useState)(1),[g,p]=(0,l.useState)(!0),[f,x]=(0,l.useState)(()=>{const e=localStorage.getItem("eventFilters");return e?JSON.parse(e):{category:"all",sort:"newest"}}),[j,y]=(0,l.useState)(""),[N,b]=(0,l.useState)(!1),w=d(j,500);(0,l.useEffect)(()=>{v(1),t([]),p(!0),S(1)},[f.category,w]),(0,l.useEffect)(()=>{localStorage.setItem("eventFilters",JSON.stringify(f))},[f]),(0,l.useEffect)(()=>{b(e.length>50)},[e.length]);const S=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;if(g||!(e>1)){h(!0);try{const s=(0,a.A)((0,a.A)({page:e,limit:12},"all"!==f.category&&{category:f.category}),w&&{search:w}),l=(await n.MT.getAll(s)).data.events||[];t(1===e?l:e=>[...e,...l]),p(12===l.length),v(e)}catch(s){console.error("Error loading events:",s)}finally{h(!1)}}},C=(0,l.useCallback)(e=>{!s&&g?S(m+1).then(e):e()},[m,s,g]),[E]=(e=>{const[t,s]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{const e=()=>{window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-500&&!t&&s(!0)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[t]),(0,l.useEffect)(()=>{t&&e(()=>{s(!1)})},[t,e]),[t,s]})(C),k=(e,t)=>{x(s=>(0,a.A)((0,a.A)({},s),{},{[e]:t}))},A=(0,l.useMemo)(()=>{const t=[...e];switch(f.sort){case"popular":return t.sort((e,t)=>t.registeredCount-e.registeredCount);case"ending-soon":return t.sort((e,t)=>new Date(e.endDate)-new Date(t.endDate));default:return t.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))}},[e,f.sort]),L=(0,l.useCallback)(e=>(0,o.jsx)(r.A,{event:e},e._id),[]);return(0,o.jsxs)("div",{className:"events-page",children:[(0,o.jsx)("div",{className:"page-header",children:(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("h1",{children:"Discover Events"}),(0,o.jsx)("p",{children:"Find and register for upcoming school events"})]})}),(0,o.jsxs)("div",{className:"container",children:[(0,o.jsxs)("div",{className:"filters-section",children:[(0,o.jsxs)("div",{className:"search-box",children:[(0,o.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,o.jsx)("input",{type:"text",placeholder:"Search events by title or description...",value:j,onChange:e=>y(e.target.value),className:"debounced-input"}),j&&j!==w&&(0,o.jsx)("div",{className:"search-loading",children:(0,o.jsx)("div",{className:"spinner",style:{width:"16px",height:"16px",borderWidth:"2px"}})})]}),(0,o.jsxs)("div",{className:"filters-row",children:[(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{className:"filter-label",children:"Category"}),(0,o.jsx)("div",{className:"category-filters",children:["All","Sports","Academic","Cultural","Exhibition","Debate","Workshop","Social"].map(e=>(0,o.jsx)("button",{className:"filter-btn ".concat(f.category===e.toLowerCase()?"active":""),onClick:()=>k("category",e.toLowerCase()),children:e},e))})]}),(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{className:"filter-label",children:"Sort By"}),(0,o.jsx)("select",{className:"sort-select",value:f.sort,onChange:e=>k("sort",e.target.value),children:[{value:"newest",label:"Newest First"},{value:"popular",label:"Most Popular"},{value:"ending-soon",label:"Ending Soon"}].map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),!s&&(0,o.jsxs)("div",{className:"results-info",children:[(0,o.jsxs)("p",{children:[A.length," event",1!==A.length?"s":""," found"]}),N&&(0,o.jsx)("span",{className:"virtual-scroll-badge",children:"Virtual Scrolling Enabled"})]}),s&&1===m?(0,o.jsx)(i.Hy,{count:9}):A.length>0?(0,o.jsxs)(o.Fragment,{children:[N?(0,o.jsx)(u,{items:A,itemHeight:400,containerHeight:800,renderItem:L,overscan:2,className:"events-virtual-list"}):(0,o.jsx)("div",{className:"events-grid gpu-accelerated",children:A.map(e=>(0,o.jsx)(r.A,{event:e},e._id))}),E&&g&&!N&&(0,o.jsx)("div",{style:{padding:"40px 0",textAlign:"center"},children:(0,o.jsx)("div",{className:"spinner"})})]}):(0,o.jsx)(c,{icon:"\ud83d\udd0d",title:"No events found",message:"Try adjusting your search or filters to find what you're looking for",action:()=>{x({category:"all",sort:"newest"}),y(""),localStorage.removeItem("eventFilters")},actionLabel:"Clear Filters"})]})]})}}}]);
//# sourceMappingURL=592.770b2750.chunk.js.map
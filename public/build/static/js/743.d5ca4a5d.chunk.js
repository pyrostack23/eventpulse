"use strict";(self.webpackChunkeventpulse_frontend=self.webpackChunkeventpulse_frontend||[]).push([[743],{2743:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var i=a(5043),t=a(3216),n=a(4505),r=a(8729),l=a(3969),c=a(7842),d=a(7503),o=a(5475),h=a(579);const m=e=>{let{items:s}=e;return(0,h.jsx)("nav",{className:"breadcrumbs","aria-label":"Breadcrumb",children:(0,h.jsx)("ol",{className:"breadcrumbs-list",children:s.map((e,a)=>(0,h.jsx)("li",{className:"breadcrumb-item",children:a<s.length-1?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.N_,{to:e.path,className:"breadcrumb-link",children:e.label}),(0,h.jsx)("span",{className:"breadcrumb-separator",children:"/"})]}):(0,h.jsx)("span",{className:"breadcrumb-current",children:e.label})},a))})})};var v=a(6485),x=a(9379);const u=e=>{let{eventTitle:s,eventPrice:a,onPaymentSuccess:t,onCancel:n}=e;const[r,l]=(0,i.useState)(""),[c,d]=(0,i.useState)(""),[o,m]=(0,i.useState)(""),[v,u]=(0,i.useState)(""),[p,j]=(0,i.useState)(!1),[g,N]=(0,i.useState)(!1),[y,b]=(0,i.useState)({});(0,i.useEffect)(()=>{l(""),d(""),m(""),u(""),b({})},[]);const k=(()=>{const e=r.replace(/\D/g,"").slice(0,16);const s=[];for(let a=0;a<16;a++)s.push(e[a]||"_");return s})();return(0,h.jsxs)("div",{className:"credit-card-payment-wrapper",children:[(0,h.jsxs)("div",{className:"payment-header",children:[(0,h.jsx)("h2",{children:"Payment Details"}),(0,h.jsxs)("p",{className:"payment-subtitle",children:["Complete your registration for ",s]}),(0,h.jsxs)("div",{className:"payment-amount",children:[(0,h.jsx)("span",{children:"Total Amount:"}),(0,h.jsxs)("span",{className:"amount",children:["$",a.toFixed(2)]})]})]}),(0,h.jsxs)("div",{className:"credit-card-container",children:[(0,h.jsxs)("div",{className:"credit-card ".concat(p?"flipped":""),id:"card",children:[(0,h.jsxs)("div",{className:"card-front",children:[(0,h.jsxs)("div",{className:"branding",children:[(0,h.jsx)("div",{className:"chip-img",children:(0,h.jsxs)("svg",{viewBox:"0 0 40 30",fill:"none",children:[(0,h.jsx)("rect",{width:"40",height:"30",rx:"4",fill:"#FFD700"}),(0,h.jsx)("rect",{x:"5",y:"5",width:"10",height:"8",rx:"1",fill:"#FFA500"}),(0,h.jsx)("rect",{x:"17",y:"5",width:"10",height:"8",rx:"1",fill:"#FFA500"}),(0,h.jsx)("rect",{x:"5",y:"15",width:"10",height:"8",rx:"1",fill:"#FFA500"}),(0,h.jsx)("rect",{x:"17",y:"15",width:"10",height:"8",rx:"1",fill:"#FFA500"})]})}),(0,h.jsx)("div",{className:"visa-logo",children:(0,h.jsx)("svg",{viewBox:"0 0 48 16",fill:"white",children:(0,h.jsx)("text",{x:"0",y:"12",fontSize:"14",fontWeight:"bold",children:"VISA"})})})]}),(0,h.jsxs)("div",{className:"card-number",children:[(0,h.jsx)("div",{children:k.slice(0,4).map((e,s)=>(0,h.jsx)("span",{className:"card-number-display",children:e},s))}),(0,h.jsx)("div",{children:k.slice(4,8).map((e,s)=>(0,h.jsx)("span",{className:"card-number-display",children:e},s))}),(0,h.jsx)("div",{children:k.slice(8,12).map((e,s)=>(0,h.jsx)("span",{className:"card-number-display",children:e},s))}),(0,h.jsx)("div",{children:k.slice(12,16).map((e,s)=>(0,h.jsx)("span",{className:"card-number-display",children:e},s))})]}),(0,h.jsxs)("div",{className:"details",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Card Holder"}),(0,h.jsx)("span",{id:"card-holder-name",children:c||"Your Name Here"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Expires"}),(0,h.jsx)("span",{id:"validity",children:(()=>{if(!o)return"06/28";const e=o.split("-");if(3===e.length){const s=e[0].slice(2),a=e[1];return"".concat(a,"/").concat(s)}return"06/28"})()})]})]})]}),(0,h.jsxs)("div",{className:"card-back",children:[(0,h.jsx)("div",{className:"black-strip"}),(0,h.jsxs)("div",{className:"white-strip",children:[(0,h.jsx)("span",{children:"CVV"}),(0,h.jsx)("div",{id:"cvv-display",children:v||"***"})]}),(0,h.jsx)("div",{className:"visa-logo",children:(0,h.jsx)("svg",{viewBox:"0 0 48 16",fill:"white",children:(0,h.jsx)("text",{x:"0",y:"12",fontSize:"14",fontWeight:"bold",children:"VISA"})})})]})]}),(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),(()=>{const e={};(!r||r.length<13)&&(e.cardNumber="Please enter a valid card number"),(!c||c.trim().length<3)&&(e.cardName="Please enter the cardholder name"),o?new Date(o)<new Date&&(e.expiryDate="Card has expired"):e.expiryDate="Please select expiry date";return(!v||v.length<3)&&(e.cvv="Please enter CVV"),b(e),0===Object.keys(e).length})()&&(N(!0),setTimeout(()=>{N(!1),t({cardNumber:"****".concat(r.slice(-4)),cardName:c,amount:a,transactionId:"TXN".concat(Date.now()),timestamp:(new Date).toISOString()})},2e3))},className:"payment-form",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"card-number",children:"Card Number"}),(0,h.jsx)("input",{type:"text",id:"card-number",value:r,onChange:e=>{const s=e.target.value.replace(/\D/g,"");l(s.slice(0,16)),y.cardNumber&&b((0,x.A)((0,x.A)({},y),{},{cardNumber:""}))},placeholder:"1234 5678 9012 3456",className:y.cardNumber?"error":"",maxLength:"16"}),y.cardNumber&&(0,h.jsx)("span",{className:"error-message",children:y.cardNumber})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"card-name-input",children:"Card Holder Name"}),(0,h.jsx)("input",{type:"text",id:"card-name-input",value:c,onChange:e=>{const s=e.target.value.slice(0,30);d(s),y.cardName&&b((0,x.A)((0,x.A)({},y),{},{cardName:""}))},placeholder:"John Doe",className:y.cardName?"error":""}),y.cardName&&(0,h.jsx)("span",{className:"error-message",children:y.cardName})]}),(0,h.jsxs)("div",{className:"date-cvv",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"validity-input",children:"Expiry Date"}),(0,h.jsx)("input",{type:"date",id:"validity-input",value:o,onChange:e=>{m(e.target.value),y.expiryDate&&b((0,x.A)((0,x.A)({},y),{},{expiryDate:""}))},className:y.expiryDate?"error":"",min:(new Date).toISOString().split("T")[0]}),y.expiryDate&&(0,h.jsx)("span",{className:"error-message",children:y.expiryDate})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"cvv",children:"CVV"}),(0,h.jsx)("input",{type:"text",id:"cvv",value:v,onChange:e=>{const s=e.target.value.replace(/\D/g,"");u(s.slice(0,3)),y.cvv&&b((0,x.A)((0,x.A)({},y),{},{cvv:""}))},onFocus:()=>j(!0),onBlur:()=>j(!1),placeholder:"123",className:y.cvv?"error":"",maxLength:"3"}),y.cvv&&(0,h.jsx)("span",{className:"error-message",children:y.cvv})]})]}),(0,h.jsxs)("div",{className:"payment-actions",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:n,disabled:g,children:"Cancel"}),(0,h.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:g,children:g?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"spinner",style:{width:"20px",height:"20px",borderWidth:"2px"}}),"Processing..."]}):"Pay $".concat(a.toFixed(2))})]}),(0,h.jsxs)("div",{className:"payment-security",children:[(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"16",height:"16",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,h.jsx)("span",{children:"Your payment information is secure and encrypted"})]})]})]})]})},p=e=>{let{message:s="Success!",onComplete:a,duration:t=2e3}=e;const[n,r]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{const e=setTimeout(()=>{r(!1),a&&a()},t);return()=>clearTimeout(e)},[t,a]),n?(0,h.jsx)("div",{className:"success-animation-overlay",children:(0,h.jsxs)("div",{className:"success-animation",children:[(0,h.jsx)("div",{className:"success-checkmark",children:(0,h.jsxs)("svg",{className:"checkmark",viewBox:"0 0 52 52",children:[(0,h.jsx)("circle",{className:"checkmark-circle",cx:"26",cy:"26",r:"25",fill:"none"}),(0,h.jsx)("path",{className:"checkmark-check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})]})}),(0,h.jsx)("h3",{className:"success-message",children:s})]})}):null},j=()=>{var e;const{id:s}=(0,t.g)(),a=(0,t.Zp)(),{isAuthenticated:o,user:x}=(0,r.A)(),{joinEventRoom:j,leaveEventRoom:g,on:N,off:y}=(0,l.Y)(),[b,k]=(0,i.useState)(null),[f,w]=(0,i.useState)(!0),[C,S]=(0,i.useState)(!1),[L,D]=(0,i.useState)(!1),[A,F]=(0,i.useState)(null),[E,M]=(0,i.useState)([]),[P,B]=(0,i.useState)(!1),[V,z]=(0,i.useState)(0),[T,W]=(0,i.useState)(!1),[R,H]=(0,i.useState)(!1),[_,O]=(0,i.useState)(null);(0,i.useEffect)(()=>(q(),()=>{s&&g(s)}),[s]),(0,i.useEffect)(()=>{if(b)return j(b._id),N("event:update",I),()=>{y("event:update",I)}},[b]);const I=e=>{M(s=>[e,...s]),d.oR.info("New event update!")},q=async()=>{try{const a=await n.MT.getById(s);if(k(a.data.event),M(a.data.event.liveUpdates||[]),o){var e;const a=null===(e=(await n.XO.getMyRegistrations()).data.registrations)||void 0===e?void 0:e.find(e=>{var a;return(null===(a=e.event)||void 0===a?void 0:a._id)===s});a&&(D(!0),F(a))}}catch(a){console.error("Error loading event:",a),d.oR.error("Failed to load event")}finally{w(!1)}},X=()=>{W(!1)};if(f)return(0,h.jsx)("div",{className:"loading-overlay",children:(0,h.jsx)("div",{className:"spinner"})});if(!b)return(0,h.jsxs)("div",{className:"container",style:{padding:"4rem 0",textAlign:"center"},children:[(0,h.jsx)("h2",{children:"Event not found"}),(0,h.jsx)("button",{className:"btn btn-primary",onClick:()=>a("/events"),children:"Browse Events"})]});const Y=b.capacity-b.registeredCount,$=Y<=.2*b.capacity&&Y>0,U=Y<=0,G=[{label:"Home",path:"/"},{label:"Events",path:"/events"},{label:b.title,path:"/events/".concat(b._id)}];return(0,h.jsxs)("div",{className:"event-detail-page",children:[(0,h.jsx)("div",{className:"container",children:(0,h.jsx)(m,{items:G})}),(0,h.jsxs)("div",{className:"event-hero",children:[(0,h.jsxs)("div",{className:"event-hero-image",children:[b.image?(0,h.jsx)("img",{src:b.image,alt:b.title}):(0,h.jsx)("div",{className:"hero-placeholder",style:{background:(e=>{const s={Sports:"#f59e0b",Academic:"#3b82f6",Cultural:"#ec4899",Exhibition:"#8b5cf6",Debate:"#10b981",Workshop:"#f97316",Social:"#06b6d4",Other:"#6366f1"};return s[e]||s.Other})(b.category)},children:(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,h.jsx)("div",{className:"hero-overlay"})]}),(0,h.jsx)("div",{className:"container",children:(0,h.jsxs)("div",{className:"event-hero-content",children:[(0,h.jsxs)("div",{className:"event-badges",children:[(0,h.jsx)("span",{className:"badge badge-primary",children:b.category}),"ongoing"===b.status&&(0,h.jsx)("span",{className:"badge badge-success",children:"Live Now"}),b.isFeatured&&(0,h.jsx)("span",{className:"badge badge-warning",children:"Featured"})]}),(0,h.jsx)("h1",{children:b.title}),(0,h.jsxs)("div",{className:"event-meta-row",children:[(0,h.jsxs)("div",{className:"meta-item",children:[(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,c.A)(new Date(b.startDate),"PPP")]}),(0,h.jsxs)("div",{className:"meta-item",children:[(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,c.A)(new Date(b.startDate),"p")]}),(0,h.jsxs)("div",{className:"meta-item",children:[(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),b.location]})]})]})})]}),(0,h.jsx)("div",{className:"container",children:(0,h.jsxs)("div",{className:"event-detail-grid",children:[(0,h.jsxs)("div",{className:"event-main-content",children:[(0,h.jsxs)("section",{className:"content-section",children:[(0,h.jsx)("h2",{children:"About This Event"}),(0,h.jsx)("p",{className:"event-description",children:b.description})]}),b.highlights&&b.highlights.length>0&&(0,h.jsxs)("section",{className:"content-section",children:[(0,h.jsx)("h2",{children:"Event Highlights"}),(0,h.jsx)("div",{className:"highlights-list",children:b.highlights.map((e,s)=>(0,h.jsxs)("div",{className:"highlight-item",children:[(0,h.jsx)("div",{className:"highlight-icon",children:(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h4",{children:e.title}),(0,h.jsx)("p",{children:e.description})]})]},s))})]}),E.length>0&&(0,h.jsxs)("section",{className:"content-section",children:[(0,h.jsx)("h2",{children:"Live Updates"}),(0,h.jsx)("div",{className:"live-updates-list",children:E.map((e,s)=>(0,h.jsxs)("div",{className:"live-update-item",children:[(0,h.jsx)("div",{className:"update-time",children:(0,c.A)(new Date(e.timestamp),"p")}),(0,h.jsx)("div",{className:"update-content",children:(0,h.jsx)("p",{children:e.message})})]},s))})]}),b.images&&b.images.length>0&&(0,h.jsxs)("section",{className:"content-section",children:[(0,h.jsx)("h2",{children:"Gallery"}),(0,h.jsx)("div",{className:"event-gallery",children:b.images.map((e,s)=>(0,h.jsx)("div",{className:"gallery-item",onClick:()=>{z(s),B(!0)},children:(0,h.jsx)("img",{src:e,alt:"Event ".concat(s+1)})},s))})]})]}),(0,h.jsxs)("div",{className:"event-sidebar",children:[(0,h.jsxs)("div",{className:"sidebar-card",children:[(0,h.jsxs)("div",{className:"capacity-info",children:[(0,h.jsxs)("div",{className:"capacity-header",children:[(0,h.jsx)("span",{className:"capacity-label",children:"Availability"}),(0,h.jsxs)("span",{className:"capacity-count",children:[b.registeredCount," / ",b.capacity]})]}),(0,h.jsx)("div",{className:"capacity-bar",children:(0,h.jsx)("div",{className:"capacity-fill",style:{width:"".concat(b.registeredCount/b.capacity*100,"%"),background:U?"#ef4444":$?"#f59e0b":"var(--primary-gradient)"}})}),$&&!U&&(0,h.jsxs)("p",{className:"capacity-warning",children:["Only ",Y," spots left!"]})]}),b.requiresRegistration&&(0,h.jsx)(h.Fragment,{children:L?(0,h.jsxs)("div",{className:"registered-badge",children:[(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"24",height:"24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),b.price>0?"Already Registered & Paid":"You're registered!"]}):(0,h.jsx)("button",{className:"btn btn-primary btn-lg",style:{width:"100%"},onClick:async()=>{if(!o)return d.oR.info("Please login to register for events"),void a("/login");if(b.price>0)W(!0);else{S(!0);try{const e=await n.XO.register(b._id,{});F(e.data.registration),d.oR.success("Successfully registered for event!"),D(!0),q()}catch(i){var e,s;console.error("Error registering:",i),d.oR.error((null===(e=i.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to register")}finally{S(!1)}}},disabled:C||U||!o,children:C?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"spinner",style:{width:"20px",height:"20px",borderWidth:"2px"}}),b.price>0?"Processing Payment...":"Registering..."]}):U?"Event Full":b.price>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Pay Now - $",b.price.toFixed(2)]}):"Register Now"})})]}),A&&(0,h.jsx)(v.A,{registration:A}),(0,h.jsxs)("div",{className:"sidebar-card",children:[(0,h.jsx)("h3",{children:"Event Details"}),(0,h.jsxs)("div",{className:"info-list",children:[(0,h.jsxs)("div",{className:"info-item",children:[(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"info-label",children:"Organizer"}),(0,h.jsx)("span",{className:"info-value",children:(null===(e=b.organizer)||void 0===e?void 0:e.name)||"School Admin"})]})]}),b.venue&&(0,h.jsxs)("div",{className:"info-item",children:[(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"info-label",children:"Venue"}),(0,h.jsx)("span",{className:"info-value",children:b.venue})]})]}),b.price>0&&(0,h.jsxs)("div",{className:"info-item",children:[(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{className:"info-label",children:"Price"}),(0,h.jsxs)("span",{className:"info-value",children:["$",b.price]})]})]})]})]}),b.tags&&b.tags.length>0&&(0,h.jsxs)("div",{className:"sidebar-card",children:[(0,h.jsx)("h3",{children:"Tags"}),(0,h.jsx)("div",{className:"tags-list",children:b.tags.map((e,s)=>(0,h.jsx)("span",{className:"tag",children:e},s))})]})]})]})}),P&&(0,h.jsxs)("div",{className:"gallery-modal",onClick:()=>B(!1),children:[(0,h.jsx)("button",{className:"gallery-close",children:(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"32",height:"32",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,h.jsx)("img",{src:b.images[V],alt:"Gallery",onClick:e=>e.stopPropagation()})]}),T&&(0,h.jsx)("div",{className:"payment-modal-overlay",onClick:X,children:(0,h.jsxs)("div",{className:"payment-modal-content",onClick:e=>e.stopPropagation(),children:[(0,h.jsx)("button",{className:"modal-close",onClick:X,children:(0,h.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"24",height:"24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,h.jsx)(u,{eventTitle:b.title,eventPrice:b.price,onPaymentSuccess:async e=>{O(e),W(!1),S(!0);try{const s=await n.XO.register(b._id,{paymentDetails:e});F(s.data.registration),D(!0),H(!0),q()}catch(i){var s,a;console.error("Error registering:",i),d.oR.error((null===(s=i.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to complete registration")}finally{S(!1)}},onCancel:X})]})}),R&&(0,h.jsx)(p,{message:"Payment Successful! You're registered for the event.",onComplete:()=>{H(!1),window.scrollTo({top:0,behavior:"smooth"})},duration:3e3})]})}},6485:(e,s,a)=>{a.d(s,{A:()=>n});a(5043);var i=a(1614),t=a(579);const n=e=>{let{registration:s}=e;const a=(null===s||void 0===s?void 0:s.qrCode)||"",n=null===s||void 0===s?void 0:s.event,r=!(null===n||void 0===n||!n.endDate)&&new Date>new Date(n.endDate),l=(null===s||void 0===s||s.paymentStatus,"not_required"===(null===s||void 0===s?void 0:s.paymentStatus)),c="pending"===(null===s||void 0===s?void 0:s.paymentStatus);return(0,t.jsx)("div",{className:"event-ticket-qr",children:(0,t.jsxs)("div",{className:"ticket-card",children:[(0,t.jsxs)("div",{className:"ticket-header",children:[(0,t.jsx)("h3",{children:"Event Ticket"}),(0,t.jsx)("span",{className:"ticket-status ".concat(r?"expired":c?"pending":"confirmed"),children:r?"Expired":c?"Payment Pending":"Confirmed"})]}),(0,t.jsxs)("div",{className:"ticket-details",children:[(0,t.jsxs)("div",{className:"ticket-number",children:["#",null===s||void 0===s?void 0:s.ticketNumber]}),(0,t.jsx)("h4",{children:null===n||void 0===n?void 0:n.title}),(0,t.jsx)("p",{children:null!==n&&void 0!==n&&n.startDate?new Date(n.startDate).toLocaleDateString():""}),(null===s||void 0===s?void 0:s.paymentAmount)>0&&(0,t.jsxs)("div",{className:"ticket-price",children:[(0,t.jsx)("span",{className:"price-label",children:"Amount Paid:"}),(0,t.jsxs)("span",{className:"price-value",children:["$",s.paymentAmount.toFixed(2)]})]}),l&&(0,t.jsx)("div",{className:"ticket-free",children:(0,t.jsx)("span",{className:"free-badge",children:"FREE EVENT"})})]}),(0,t.jsx)("div",{className:"ticket-qr-wrapper",children:(0,t.jsx)(i.hp,{id:"ticket-qr-".concat(null===s||void 0===s?void 0:s._id),value:a,size:180,level:"H",includeMargin:!0})}),(0,t.jsx)("div",{className:"ticket-info",children:r?(0,t.jsx)("p",{className:"ticket-warning",children:"\u26a0\ufe0f This ticket has expired"}):c?(0,t.jsx)("p",{className:"ticket-warning",children:"\u26a0\ufe0f Complete payment to activate ticket"}):(0,t.jsx)("p",{children:"\u2713 Show this QR code at the event entrance"})}),(0,t.jsx)("div",{className:"ticket-actions",children:(0,t.jsx)("button",{className:"btn btn-primary",onClick:()=>{const e=document.getElementById("ticket-qr-".concat(null===s||void 0===s?void 0:s._id)),a=(new XMLSerializer).serializeToString(e),i=document.createElement("canvas"),t=i.getContext("2d"),n=new Image;n.onload=()=>{var e;i.width=n.width,i.height=n.height,t.drawImage(n,0,0);const a=i.toDataURL("image/png"),r=document.createElement("a");r.download="".concat((null===s||void 0===s||null===(e=s.event)||void 0===e?void 0:e.title)||"event","-ticket-").concat(null===s||void 0===s?void 0:s.ticketNumber,".png"),r.href=a,r.click()},n.src="data:image/svg+xml;base64,"+btoa(a)},disabled:c||r,children:c?"Payment Required":r?"Ticket Expired":"Download Ticket"})})]})})}}}]);
//# sourceMappingURL=743.d5ca4a5d.chunk.js.map